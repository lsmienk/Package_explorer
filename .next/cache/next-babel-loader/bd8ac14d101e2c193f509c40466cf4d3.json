{"ast":null,"code":"import fs from 'fs';\nexport default ((req, res) => {\n  // res.statusCode = 200\n  // res.setHeader('Content-Type', 'application/json')\n  // res.end(JSON.stringify({ name: 'John Doe' }))\n  fs.readFile('/Users/lsmienk/status.txt', 'utf8', function (err, data) {\n    const packages = data.split('\\n\\n');\n    const result = packages.reduce((acc, current) => {\n      const pairs = current.split(/(?<=^|[\\r\\n])([A-Z][^:]*): ([^\\r\\n]*(?:[\\r\\n]+(?![A-Z].*:).*)*)/);\n      let i = 0;\n      const obj = {};\n\n      while (pairs[i] !== undefined) {\n        if (pairs[i] == '' || '\\n') {\n          i++;\n          obj[pairs[i++]] = pairs[i++];\n        }\n      }\n\n      console.dir(obj);\n    }, []);\n    console.log(result);\n    res.end('no');\n  });\n});","map":{"version":3,"sources":["/Users/lsmienk/Codam/reaktor_tech_assignment/pages/api/packages.js"],"names":["fs","req","res","readFile","err","data","packages","split","result","reduce","acc","current","pairs","i","obj","undefined","console","dir","log","end"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AAEA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzB;AACA;AACA;AAEAF,EAAAA,EAAE,CAACG,QAAH,CAAY,2BAAZ,EAAyC,MAAzC,EAAiD,UAASC,GAAT,EAAcC,IAAd,EAAoB;AACjE,UAAMC,QAAQ,GAAGD,IAAI,CAACE,KAAL,CAAW,MAAX,CAAjB;AACA,UAAMC,MAAM,GAAGF,QAAQ,CAACG,MAAT,CAAgB,CAACC,GAAD,EAAMC,OAAN,KAAkB;AAC7C,YAAMC,KAAK,GAAGD,OAAO,CAACJ,KAAR,CAAc,iEAAd,CAAd;AACA,UAAIM,CAAC,GAAG,CAAR;AACA,YAAMC,GAAG,GAAG,EAAZ;;AACA,aAAMF,KAAK,CAACC,CAAD,CAAL,KAAaE,SAAnB,EAA8B;AAC1B,YAAIH,KAAK,CAACC,CAAD,CAAL,IAAY,EAAZ,IAAkB,IAAtB,EAA4B;AACxBA,UAAAA,CAAC;AACDC,UAAAA,GAAG,CAACF,KAAK,CAACC,CAAC,EAAF,CAAN,CAAH,GAAkBD,KAAK,CAACC,CAAC,EAAF,CAAvB;AACH;AACJ;;AACDG,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH,KAXc,EAWZ,EAXY,CAAf;AAaAE,IAAAA,OAAO,CAACE,GAAR,CAAYV,MAAZ;AAEAN,IAAAA,GAAG,CAACiB,GAAJ,CAAQ,IAAR;AACH,GAlBD;AAmBH,CAxBD","sourcesContent":["import fs from 'fs'\n\nexport default (req, res) => {\n    // res.statusCode = 200\n    // res.setHeader('Content-Type', 'application/json')\n    // res.end(JSON.stringify({ name: 'John Doe' }))\n\n    fs.readFile('/Users/lsmienk/status.txt', 'utf8', function(err, data) {\n        const packages = data.split('\\n\\n');\n        const result = packages.reduce((acc, current) => {\n            const pairs = current.split(/(?<=^|[\\r\\n])([A-Z][^:]*): ([^\\r\\n]*(?:[\\r\\n]+(?![A-Z].*:).*)*)/);\n            let i = 0;\n            const obj = {};\n            while(pairs[i] !== undefined) {\n                if (pairs[i] == '' || '\\n') {\n                    i++;\n                    obj[pairs[i++]] = pairs[i++];\n                }\n            }\n            console.dir(obj);\n        }, []);\n\n        console.log(result);\n\n        res.end('no');\n    })\n}"]},"metadata":{},"sourceType":"module"}